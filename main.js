(()=>{"use strict";const e=async function(e,t){const n=await async function(e,t){return(await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&units=${t}&APPID=8d838cab2623bf0e4ccf3c4d32eab7bb`,{mode:"cors"})).json()}(e,t);return function(e,t){if("404"===e.cod)throw new Error("City not found");const n=e.name,{country:i}=e.sys,{temp:o}=e.main,r=e.weather[0].main,c=r;return console.log(e),{city:n,country:i,temp:o,weather:r,keyword:c,units:t}}(n,t)},t=async function(e){const t=await async function(e){return(await fetch(`https://api.giphy.com/v1/gifs/translate?api_key=ieAImKLCMr3MRyKct42s8BMVBEdSgL0A&s=${e}`,{mode:"cors"})).json()}(e);return function(e){return e.data.images.original.url}(t)},n=/^[a-z]{2}$/i;const i=function(e,t,n){e.innerText="";const i=document.createElement("form");e.appendChild(i);const o=document.createElement("label");i.appendChild(o),o.innerText="City: ";const r=document.createElement("input");o.appendChild(r),r.setAttribute("name","city"),r.toggleAttribute("required");const c=document.createElement("div");i.appendChild(c),c.className="unit-wrapper";const a=document.createElement("label");c.appendChild(a),a.innerText="Units: ";const s=(e,t,n,i)=>{const o=document.createElement("label");c.appendChild(o),o.innerText=e,o.style.setProperty("grid-column","2/3"),o.className="radio-label";const r=document.createElement("input");return o.appendChild(r),r.setAttribute("type","radio"),r.setAttribute("name",n),r.value=t,i&&r.toggleAttribute("checked"),[o,r]},[d,u]=s("Celcius","metric","units",!0),[l,m]=s("Farenheit","imperial","units",!1),p=document.createElement("input");i.appendChild(p),p.setAttribute("type","submit"),p.value="Submit",p.addEventListener("click",(e=>{if(!r.validity.valid)return!1;e.preventDefault();const t=new FormData(i);n(t.get("city"),t.get("units"))}))},o=function(e,t){t.innerText="";const n=document.createElement("div");t.appendChild(n),n.className="loading-box",n.innerText="Now Loading..."},r=function(e,t,i,o){t.innerText="";const r=function(e){if(!n.test(e)){const t=typeof e;throw new TypeError(`cc argument must be an ISO 3166-1 alpha-2 string, but got '${"string"===t?e:t}' instead.`)}const t=[...e.toUpperCase()].map((e=>e.codePointAt()+127397));return String.fromCodePoint(...t)}(i.country),c=document.createElement("div");t.appendChild(c),c.innerText=`${i.city} ${r}`;const a="metric"===i.units?"°C":"°F",s=document.createElement("div");t.appendChild(s),s.innerText=i.temp+a;const d=document.createElement("div");t.appendChild(d),d.innerText=i.weather,o.then((e=>{console.log("image to load: ",e);const n=document.createElement("img");t.appendChild(n),n.setAttribute("src",e),n.setAttribute("alt",`Image of ${i.weather}`)}))},c=function(e,t,n){t.innerText="";const i=document.createElement("div");t.appendChild(i),i.className="error-box",i.innerText="Failed to find results. Please check your inputs and try again"},a=document.querySelector("#dom-inputs"),s=document.querySelector("#dom-outputs");i(a,s,((n,i)=>{o(a,s),e(n,i).then((e=>{(2e3,new Promise(((e,t)=>{setTimeout((()=>{e("foo")}),2e3)}))).then((n=>{console.log(e);const i=t(e.keyword);r(a,s,e,i)}))}),(e=>{c(a,s)}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWFyRCxVQUFZLGtFQ3hHckJILEVBQVlLLFNBQVNvRCxjQUFjLGVBQ25DeEQsRUFBYUksU0FBU29ELGNBQWMsZ0JBMEIxQ0MsRUFBaUIxRCxFQUFXQyxHQWJMLENBQUNwQixFQUFNUCxLQUM1Qm9GLEVBQWlCMUQsRUFBV0MsR0FDNUIsRUFBdUJwQixFQUFNUCxHQUFPOEUsTUFBTWpFLEtBQ1AsSUFaakIsSUFBSXdFLFNBQVEsQ0FBQ0MsRUFBU0MsS0FDdENDLFlBQVcsS0FDVEYsRUFBUSxTQVV1QixTQUNwQlIsTUFBTVcsSUFDakIxRSxRQUFRQyxJQUFJSCxHQUNaLE1BQU02RSxFQUFhQyxFQUFlOUUsRUFBUUMsU0FDMUNzRSxFQUFvQjFELEVBQVdDLEVBQVlkLEVBQVM2RSxTQUVwREUsSUFDRlIsRUFBa0IxRCxFQUFXQyxVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2VhdGhlci1mZXRjaC8uL3NyYy93ZWF0aGVyLmpzIiwid2VicGFjazovL3dlYXRoZXItZmV0Y2gvLi9zcmMvZ2lwaHkuanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1mZXRjaC8uL25vZGVfbW9kdWxlcy9jb3VudHJ5LWNvZGUtZW1vamkvbGliL2luZGV4Lm1qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWZldGNoLy4vc3JjL2Rpc3BsYXkuanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1mZXRjaC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAgbmV2ZXIgcHVibGlzaCBBUEkga2V5cyBmb3IgcGFpZCBzZXJ2aWNlc1xuY29uc3QgYXBpS2V5V2VhdGhlciA9ICc4ZDgzOGNhYjI2MjNiZjBlNGNjZjNjNGQzMmVhYjdiYic7XG5cbi8vICBwYXJzZSBvcGVuIHdlYXRoZXIganNvbiBmb3IgcmVsZXZhbnQgZGF0YVxuZnVuY3Rpb24gcHJvY2Vzc1dlYXRoZXIoanNvbiwgdW5pdHMpIHtcbiAgaWYgKGpzb24uY29kID09PSAnNDA0JykgeyB0aHJvdyBuZXcgRXJyb3IoJ0NpdHkgbm90IGZvdW5kJyk7IH1cbiAgY29uc3QgY2l0eSA9IGpzb24ubmFtZTtcbiAgY29uc3QgeyBjb3VudHJ5IH0gPSBqc29uLnN5cztcbiAgY29uc3QgeyB0ZW1wIH0gPSBqc29uLm1haW47XG4gIGNvbnN0IHdlYXRoZXIgPSBqc29uLndlYXRoZXJbMF0ubWFpbjtcbiAgY29uc3Qga2V5d29yZCA9IHdlYXRoZXI7XG4gIGNvbnNvbGUubG9nKGpzb24pO1xuXG4gIHJldHVybiB7XG4gICAgY2l0eSwgY291bnRyeSwgdGVtcCwgd2VhdGhlciwga2V5d29yZCwgdW5pdHMsXG4gIH07XG59XG5cbi8vICBzZW5kIG9wZW4gd2VhdGhlciBhcGkgcmVxdWVzdFxuYXN5bmMgZnVuY3Rpb24gcmVxdWVzdFdlYXRoZXIobG9jYXRpb24sIHVuaXRzKSB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS93ZWF0aGVyP3E9JHtsb2NhdGlvbn0mdW5pdHM9JHt1bml0c30mQVBQSUQ9JHthcGlLZXlXZWF0aGVyfWAsIHtcbiAgICBtb2RlOiAnY29ycycsXG4gIH0pO1xuICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xufVxuXG4vLyAgc2VuZCBhIHJlcXVlc3QgdGhlbiBwcm9jZXNzIHRoZSByZXN1bHRcbmFzeW5jIGZ1bmN0aW9uIGdldFdlYXRoZXIobG9jYXRpb24sIHVuaXRzKSB7XG4gIGNvbnN0IGpzb24gPSBhd2FpdCByZXF1ZXN0V2VhdGhlcihsb2NhdGlvbiwgdW5pdHMpO1xuICByZXR1cm4gcHJvY2Vzc1dlYXRoZXIoanNvbiwgdW5pdHMpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7IGdldFdlYXRoZXIgfTtcbiIsIi8vICBuZXZlciBwdWJsaXNoIEFQSSBrZXlzIGZvciBwYWlkIHNlcnZpY2VzXG5jb25zdCBhcGlLZXlJbWFnZSA9ICdpZUFJbUtMQ01yM01SeUtjdDQyczhCTVZCRWRTZ0wwQSc7XG5cbi8vICBwYXJzZSBnaXBoeSBqc29uIGZvciByZWxldmFudCBkYXRhXG5mdW5jdGlvbiBwcm9jZXNzSW1hZ2UoanNvbikge1xuICByZXR1cm4ganNvbi5kYXRhLmltYWdlcy5vcmlnaW5hbC51cmw7XG59XG5cbi8vICBzZW5kIGdpcGh5IGFwaSByZXF1ZXN0XG4vLyAgc2VuZCBvcGVuIHdlYXRoZXIgYXBpIHJlcXVlc3RcbmFzeW5jIGZ1bmN0aW9uIHJlcXVlc3RJbWFnZSh0ZXJtKSB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vYXBpLmdpcGh5LmNvbS92MS9naWZzL3RyYW5zbGF0ZT9hcGlfa2V5PSR7YXBpS2V5SW1hZ2V9JnM9JHt0ZXJtfWAsIHtcbiAgICBtb2RlOiAnY29ycycsXG4gIH0pO1xuICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xufVxuXG4vLyAgc2VuZCBhIHJlcXVlc3QgdGhlbiBwcm9jZXNzIHRoZSByZXN1bHRcbmFzeW5jIGZ1bmN0aW9uIGdldEltYWdlKHRlcm0pIHtcbiAgY29uc3QganNvbiA9IGF3YWl0IHJlcXVlc3RJbWFnZSh0ZXJtKTtcbiAgcmV0dXJuIHByb2Nlc3NJbWFnZShqc29uKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgeyBnZXRJbWFnZSB9O1xuIiwiY29uc3QgQ0NfUkVHRVggPSAvXlthLXpdezJ9JC9pO1xuY29uc3QgRkxBR19MRU5HVEggPSA0O1xuY29uc3QgT0ZGU0VUID0gMTI3Mzk3O1xuZnVuY3Rpb24gY291bnRyeUNvZGVFbW9qaShjYykge1xuICBpZiAoIUNDX1JFR0VYLnRlc3QoY2MpKSB7XG4gICAgY29uc3QgdHlwZSA9IHR5cGVvZiBjYztcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBjYyBhcmd1bWVudCBtdXN0IGJlIGFuIElTTyAzMTY2LTEgYWxwaGEtMiBzdHJpbmcsIGJ1dCBnb3QgJyR7dHlwZSA9PT0gXCJzdHJpbmdcIiA/IGNjIDogdHlwZX0nIGluc3RlYWQuYCk7XG4gIH1cbiAgY29uc3QgY29kZVBvaW50cyA9IFsuLi5jYy50b1VwcGVyQ2FzZSgpXS5tYXAoKGMpID0+IGMuY29kZVBvaW50QXQoKSArIE9GRlNFVCk7XG4gIHJldHVybiBTdHJpbmcuZnJvbUNvZGVQb2ludCguLi5jb2RlUG9pbnRzKTtcbn1cbmZ1bmN0aW9uIGVtb2ppQ291bnRyeUNvZGUoZmxhZykge1xuICBpZiAoZmxhZy5sZW5ndGggIT09IEZMQUdfTEVOR1RIKSB7XG4gICAgY29uc3QgdHlwZSA9IHR5cGVvZiBmbGFnO1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYGZsYWcgYXJndW1lbnQgbXVzdCBiZSBhIGZsYWcgZW1vamksIGJ1dCBnb3QgJyR7dHlwZSA9PT0gXCJzdHJpbmdcIiA/IGZsYWcgOiB0eXBlfScgaW5zdGVhZC5gKTtcbiAgfVxuICBjb25zdCBjb2RlUG9pbnRzID0gWy4uLmZsYWddLm1hcCgoYykgPT4gYy5jb2RlUG9pbnRBdCgpIC0gT0ZGU0VUKTtcbiAgcmV0dXJuIFN0cmluZy5mcm9tQ29kZVBvaW50KC4uLmNvZGVQb2ludHMpO1xufVxudmFyIHNyY19kZWZhdWx0ID0gY291bnRyeUNvZGVFbW9qaTtcbmV4cG9ydCB7XG4gIGNvdW50cnlDb2RlRW1vamksXG4gIHNyY19kZWZhdWx0IGFzIGRlZmF1bHQsXG4gIGVtb2ppQ291bnRyeUNvZGVcbn07XG4iLCJpbXBvcnQgY291bnRyeUNvZGVFbW9qaSBmcm9tICdjb3VudHJ5LWNvZGUtZW1vamknO1xuXG5mdW5jdGlvbiBzaG93SG9tZShkb21JbnB1dHMsIGRvbU91dHB1dHMsIGNhbGxiYWNrKSB7XG4gIC8vICBlcmFzZSBvbGQgY29udGVudFxuICBkb21JbnB1dHMuaW5uZXJUZXh0ID0gJyc7XG5cbiAgLy8gIGZvcm1cbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcbiAgZG9tSW5wdXRzLmFwcGVuZENoaWxkKGZvcm0pO1xuICAvLyAgICBjaXR5IGlucHV0XG4gIGNvbnN0IGNpdHlMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gIGZvcm0uYXBwZW5kQ2hpbGQoY2l0eUxhYmVsKTtcbiAgY2l0eUxhYmVsLmlubmVyVGV4dCA9ICdDaXR5OiAnO1xuICBjb25zdCBjaXR5SW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICBjaXR5TGFiZWwuYXBwZW5kQ2hpbGQoY2l0eUlucHV0KTtcbiAgY2l0eUlucHV0LnNldEF0dHJpYnV0ZSgnbmFtZScsICdjaXR5Jyk7XG4gIGNpdHlJbnB1dC50b2dnbGVBdHRyaWJ1dGUoJ3JlcXVpcmVkJyk7XG5cbiAgLy8gIHVuaXQgd3JhcHBlclxuICBjb25zdCB1bml0V3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBmb3JtLmFwcGVuZENoaWxkKHVuaXRXcmFwcGVyKTtcbiAgdW5pdFdyYXBwZXIuY2xhc3NOYW1lID0gJ3VuaXQtd3JhcHBlcic7XG5cbiAgLy8gICAgdW5pdCBpbnB1dCBkZXNjcmlwdGlvblxuICBjb25zdCB1bml0TGFiZWxEZXNjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgdW5pdFdyYXBwZXIuYXBwZW5kQ2hpbGQodW5pdExhYmVsRGVzYyk7XG4gIHVuaXRMYWJlbERlc2MuaW5uZXJUZXh0ID0gJ1VuaXRzOiAnO1xuXG4gIGNvbnN0IGNyZWF0ZVJhZGlvID0gKGxhYmVsLCB2YWx1ZSwgZ3JvdXAsIGNoZWNrZWQpID0+IHtcbiAgICBjb25zdCB1bml0TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgIHVuaXRXcmFwcGVyLmFwcGVuZENoaWxkKHVuaXRMYWJlbCk7XG4gICAgdW5pdExhYmVsLmlubmVyVGV4dCA9IGxhYmVsO1xuICAgIHVuaXRMYWJlbC5zdHlsZS5zZXRQcm9wZXJ0eSgnZ3JpZC1jb2x1bW4nLCAnMi8zJyk7XG4gICAgdW5pdExhYmVsLmNsYXNzTmFtZSA9ICdyYWRpby1sYWJlbCc7XG5cbiAgICBjb25zdCB1bml0SW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIHVuaXRMYWJlbC5hcHBlbmRDaGlsZCh1bml0SW5wdXQpO1xuICAgIHVuaXRJbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAncmFkaW8nKTtcbiAgICB1bml0SW5wdXQuc2V0QXR0cmlidXRlKCduYW1lJywgZ3JvdXApO1xuICAgIHVuaXRJbnB1dC52YWx1ZSA9IHZhbHVlO1xuICAgIGlmIChjaGVja2VkKSB7IHVuaXRJbnB1dC50b2dnbGVBdHRyaWJ1dGUoJ2NoZWNrZWQnKTsgfVxuICAgIHJldHVybiBbdW5pdExhYmVsLCB1bml0SW5wdXRdO1xuICB9O1xuXG4gIGNvbnN0IFt1bml0TGFiZWxDLCB1bml0SW5wdXRDXSA9IGNyZWF0ZVJhZGlvKCdDZWxjaXVzJywgJ21ldHJpYycsICd1bml0cycsIHRydWUpO1xuICBjb25zdCBbdW5pdExhYmVsRiwgdW5pdElucHV0Rl0gPSBjcmVhdGVSYWRpbygnRmFyZW5oZWl0JywgJ2ltcGVyaWFsJywgJ3VuaXRzJywgZmFsc2UpO1xuXG4gIC8vICAgIHN1Ym1pdFxuICBjb25zdCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICBmb3JtLmFwcGVuZENoaWxkKHN1Ym1pdEJ1dHRvbik7XG4gIHN1Ym1pdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnc3VibWl0Jyk7XG4gIHN1Ym1pdEJ1dHRvbi52YWx1ZSA9ICdTdWJtaXQnO1xuXG4gIHN1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgIGlmICghY2l0eUlucHV0LnZhbGlkaXR5LnZhbGlkKSByZXR1cm4gZmFsc2U7XG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGRhdGEgPSBuZXcgRm9ybURhdGEoZm9ybSk7XG4gICAgY2FsbGJhY2soZGF0YS5nZXQoJ2NpdHknKSwgZGF0YS5nZXQoJ3VuaXRzJykpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gc2hvd0xvYWQoZG9tSW5wdXRzLCBkb21PdXRwdXRzKSB7XG4gIC8vICBlcmFzZSBvbGQgY29udGVudFxuICBkb21PdXRwdXRzLmlubmVyVGV4dCA9ICcnO1xuXG4gIGNvbnN0IGxvYWRpbmdNZXNzYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRvbU91dHB1dHMuYXBwZW5kQ2hpbGQobG9hZGluZ01lc3NhZ2UpO1xuICBsb2FkaW5nTWVzc2FnZS5jbGFzc05hbWUgPSAnbG9hZGluZy1ib3gnO1xuICBsb2FkaW5nTWVzc2FnZS5pbm5lclRleHQgPSAnTm93IExvYWRpbmcuLi4nO1xufVxuXG5mdW5jdGlvbiBzaG93UmVzdWx0cyhkb21JbnB1dHMsIGRvbU91dHB1dHMsIHdlYXRoZXIsIHNvdXJjZVByb21pc2UpIHtcbiAgLy8gIGVyYXNlIG9sZCBjb250ZW50XG4gIGRvbU91dHB1dHMuaW5uZXJUZXh0ID0gJyc7XG5cbiAgLy8gIGRpc3BsYXkgdGhlIHdlYXRoZXJcbiAgY29uc3QgZW1vamkgPSBjb3VudHJ5Q29kZUVtb2ppKHdlYXRoZXIuY291bnRyeSk7XG4gIGNvbnN0IGNpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZG9tT3V0cHV0cy5hcHBlbmRDaGlsZChjaXR5KTtcbiAgY2l0eS5pbm5lclRleHQgPSBgJHt3ZWF0aGVyLmNpdHl9ICR7ZW1vaml9YDtcblxuICBjb25zdCBkZWdzID0gd2VhdGhlci51bml0cyA9PT0gJ21ldHJpYycgPyAnwrBDJyA6ICfCsEYnO1xuICBjb25zdCB0ZW1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRvbU91dHB1dHMuYXBwZW5kQ2hpbGQodGVtcCk7XG4gIHRlbXAuaW5uZXJUZXh0ID0gd2VhdGhlci50ZW1wICsgZGVncztcblxuICBjb25zdCBjb25kaXRpb25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRvbU91dHB1dHMuYXBwZW5kQ2hpbGQoY29uZGl0aW9ucyk7XG4gIGNvbmRpdGlvbnMuaW5uZXJUZXh0ID0gd2VhdGhlci53ZWF0aGVyO1xuXG4gIC8vICAgIGRpc3BsYXkgdGhlIGdpcGh5IHJlc3VsdFxuICBzb3VyY2VQcm9taXNlLnRoZW4oKHNvdXJjZSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdpbWFnZSB0byBsb2FkOiAnLCBzb3VyY2UpO1xuICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGRvbU91dHB1dHMuYXBwZW5kQ2hpbGQoaW1nKTtcbiAgICBpbWcuc2V0QXR0cmlidXRlKCdzcmMnLCBzb3VyY2UpO1xuICAgIGltZy5zZXRBdHRyaWJ1dGUoJ2FsdCcsIGBJbWFnZSBvZiAke3dlYXRoZXIud2VhdGhlcn1gKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHNob3dFcnJvcihkb21JbnB1dHMsIGRvbU91dHB1dHMsIHNlYXJjaFRlcm0pIHtcbiAgLy8gIGVyYXNlIG9sZCBjb250ZW50XG4gIGRvbU91dHB1dHMuaW5uZXJUZXh0ID0gJyc7XG5cbiAgY29uc3QgZXJyb3JNZXNzYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRvbU91dHB1dHMuYXBwZW5kQ2hpbGQoZXJyb3JNZXNzYWdlKTtcbiAgZXJyb3JNZXNzYWdlLmNsYXNzTmFtZSA9ICdlcnJvci1ib3gnO1xuICBlcnJvck1lc3NhZ2UuaW5uZXJUZXh0ID0gJ0ZhaWxlZCB0byBmaW5kIHJlc3VsdHMuIFBsZWFzZSBjaGVjayB5b3VyIGlucHV0cyBhbmQgdHJ5IGFnYWluJztcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBzaG93SG9tZSwgc2hvd0xvYWQsIHNob3dSZXN1bHRzLCBzaG93RXJyb3IsXG59O1xuIiwiaW1wb3J0IG9wZW5XZWF0aGVyIGZyb20gJy4vd2VhdGhlcic7XG5pbXBvcnQgZ2lwaHkgZnJvbSAnLi9naXBoeSc7XG5pbXBvcnQgZGlzcGxheSBmcm9tICcuL2Rpc3BsYXknO1xuXG5jb25zdCBkb21JbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZG9tLWlucHV0cycpO1xuY29uc3QgZG9tT3V0cHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkb20tb3V0cHV0cycpO1xuXG4vLyAgYWRkIHNvbWUgZXh0cmEgbG9hZCB0aW1lXG5jb25zdCBpbnNlcnREZWxheSA9IChsZW5ndGgpID0+IHtcbiAgY29uc3QgbXlQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgcmVzb2x2ZSgnZm9vJyk7XG4gICAgfSwgbGVuZ3RoKTtcbiAgfSk7XG5cbiAgcmV0dXJuIG15UHJvbWlzZTtcbn07XG5cbmNvbnN0IHN1Ym1pdENhbGxiYWNrID0gKGNpdHksIHVuaXRzKSA9PiB7XG4gIGRpc3BsYXkuc2hvd0xvYWQoZG9tSW5wdXRzLCBkb21PdXRwdXRzKTtcbiAgb3BlbldlYXRoZXIuZ2V0V2VhdGhlcihjaXR5LCB1bml0cykudGhlbigod2VhdGhlcikgPT4ge1xuICAgIGNvbnN0IHdlYXRoZXJEZWxheSA9IGluc2VydERlbGF5KDIwMDApO1xuICAgIHdlYXRoZXJEZWxheS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgY29uc29sZS5sb2cod2VhdGhlcik7XG4gICAgICBjb25zdCBpbWdQcm9taXNlID0gZ2lwaHkuZ2V0SW1hZ2Uod2VhdGhlci5rZXl3b3JkKTtcbiAgICAgIGRpc3BsYXkuc2hvd1Jlc3VsdHMoZG9tSW5wdXRzLCBkb21PdXRwdXRzLCB3ZWF0aGVyLCBpbWdQcm9taXNlKTtcbiAgICB9KTtcbiAgfSwgKGVycm9yKSA9PiB7XG4gICAgZGlzcGxheS5zaG93RXJyb3IoZG9tSW5wdXRzLCBkb21PdXRwdXRzKTtcbiAgfSk7XG59O1xuZGlzcGxheS5zaG93SG9tZShkb21JbnB1dHMsIGRvbU91dHB1dHMsIHN1Ym1pdENhbGxiYWNrKTtcbiJdLCJuYW1lcyI6WyJhc3luYyIsImxvY2F0aW9uIiwidW5pdHMiLCJqc29uIiwiZmV0Y2giLCJtb2RlIiwicmVxdWVzdFdlYXRoZXIiLCJjb2QiLCJFcnJvciIsImNpdHkiLCJuYW1lIiwiY291bnRyeSIsInN5cyIsInRlbXAiLCJtYWluIiwid2VhdGhlciIsImtleXdvcmQiLCJjb25zb2xlIiwibG9nIiwicHJvY2Vzc1dlYXRoZXIiLCJ0ZXJtIiwicmVxdWVzdEltYWdlIiwiZGF0YSIsImltYWdlcyIsIm9yaWdpbmFsIiwidXJsIiwicHJvY2Vzc0ltYWdlIiwiQ0NfUkVHRVgiLCJkb21JbnB1dHMiLCJkb21PdXRwdXRzIiwiY2FsbGJhY2siLCJpbm5lclRleHQiLCJmb3JtIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJjaXR5TGFiZWwiLCJjaXR5SW5wdXQiLCJzZXRBdHRyaWJ1dGUiLCJ0b2dnbGVBdHRyaWJ1dGUiLCJ1bml0V3JhcHBlciIsImNsYXNzTmFtZSIsInVuaXRMYWJlbERlc2MiLCJjcmVhdGVSYWRpbyIsImxhYmVsIiwidmFsdWUiLCJncm91cCIsImNoZWNrZWQiLCJ1bml0TGFiZWwiLCJzdHlsZSIsInNldFByb3BlcnR5IiwidW5pdElucHV0IiwidW5pdExhYmVsQyIsInVuaXRJbnB1dEMiLCJ1bml0TGFiZWxGIiwidW5pdElucHV0RiIsInN1Ym1pdEJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInZhbGlkaXR5IiwidmFsaWQiLCJwcmV2ZW50RGVmYXVsdCIsIkZvcm1EYXRhIiwiZ2V0IiwibG9hZGluZ01lc3NhZ2UiLCJzb3VyY2VQcm9taXNlIiwiZW1vamkiLCJjYyIsInRlc3QiLCJ0eXBlIiwiVHlwZUVycm9yIiwiY29kZVBvaW50cyIsInRvVXBwZXJDYXNlIiwibWFwIiwiYyIsImNvZGVQb2ludEF0IiwiU3RyaW5nIiwiZnJvbUNvZGVQb2ludCIsImRlZ3MiLCJjb25kaXRpb25zIiwidGhlbiIsInNvdXJjZSIsImltZyIsInNlYXJjaFRlcm0iLCJlcnJvck1lc3NhZ2UiLCJxdWVyeVNlbGVjdG9yIiwiZGlzcGxheSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0Iiwic2V0VGltZW91dCIsInJlc3BvbnNlIiwiaW1nUHJvbWlzZSIsImdpcGh5IiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9