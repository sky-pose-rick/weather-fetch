(()=>{"use strict";const t=async function(t,e){const n=await async function(t,e){return(await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${t}&units=${e}&APPID=8d838cab2623bf0e4ccf3c4d32eab7bb`,{mode:"cors"})).json()}(t,e);return function(t){if("404"===t.cod)throw new Error("City not found");const e=t.name,{country:n}=t.sys,{temp:i}=t.main,r=t.weather[0].main;return{city:e,country:n,temp:i,weather:r,keyword:r}}(n)},e=async function(t){const e=await async function(t){return(await fetch(`https://api.giphy.com/v1/gifs/translate?api_key=ieAImKLCMr3MRyKct42s8BMVBEdSgL0A&s=${t}`,{mode:"cors"})).json()}(t);return function(t){return t.data.images.original.url}(e)},n=/^[a-z]{2}$/i;const i=function(t,e,n){t.innerText="";const i=document.createElement("form");t.appendChild(i);const r=document.createElement("label");i.appendChild(r),r.innerText="City";const o=document.createElement("input");r.appendChild(o),o.setAttribute("name","city"),o.toggleAttribute("required");const c=document.createElement("label");i.appendChild(c),c.innerText="Units";const a=(t,e,n,i)=>{const r=document.createElement("label");c.appendChild(r),r.innerText=t;const o=document.createElement("input");return r.appendChild(o),o.setAttribute("type","radio"),o.setAttribute("name",n),o.value=e,i&&o.toggleAttribute("checked"),[r,o]},[u,d]=a("Celcius","metric","units",!0),[s,l]=a("Farenheit","imperial","units",!1),m=document.createElement("input");i.appendChild(m),m.setAttribute("type","submit"),m.value="Submit",m.addEventListener("click",(t=>{if(!o.validity.valid)return!1;t.preventDefault();const e=new FormData(i);n(e.get("city"),e.get("units"))}))},r=function(t,e){e.innerText="Now Loading..."},o=function(t,e,i,r){e.innerText="";const o=function(t){if(!n.test(t)){const e=typeof t;throw new TypeError(`cc argument must be an ISO 3166-1 alpha-2 string, but got '${"string"===e?t:e}' instead.`)}const e=[...t.toUpperCase()].map((t=>t.codePointAt()+127397));return String.fromCodePoint(...e)}(i.country),c=document.createElement("div");e.appendChild(c),c.innerText=`${i.city} ${o}`;const a=document.createElement("div");e.appendChild(a),a.innerText=i.temp;const u=document.createElement("div");e.appendChild(u),u.innerText=i.weather,r.then((t=>{console.log("image to load: ",t);const n=document.createElement("img");e.appendChild(n),n.setAttribute("src",t),n.setAttribute("alt",`Image of ${i.weather}`)}))},c=function(t,e,n){e.innerText="";const i=document.createElement("div");e.appendChild(i),i.innerText="Failed to find results. Please check your inputs and try again"},a=document.querySelector("#dom-inputs"),u=document.querySelector("#dom-outputs");i(a,u,((n,i)=>{r(a,u),t(n,i).then((t=>{console.log(t);const n=e(t.keyword);o(a,u,t,n)}),(t=>{c(a,u)}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YWNrOi8vd2VhdGhlci1mZXRjaC8uL3NyYy9naXBoeS5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWZldGNoLy4vbm9kZV9tb2R1bGVzL2NvdW50cnktY29kZS1lbW9qaS9saWIvaW5kZXgubWpzIiwid2VicGFjazovL3dlYXRoZXItZmV0Y2gvLi9zcmMvZGlzcGxheS5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWZldGNoLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vICBuZXZlciBwdWJsaXNoIEFQSSBrZXlzIGZvciBwYWlkIHNlcnZpY2VzXG5jb25zdCBhcGlLZXlXZWF0aGVyID0gJzhkODM4Y2FiMjYyM2JmMGU0Y2NmM2M0ZDMyZWFiN2JiJztcblxuLy8gIHBhcnNlIG9wZW4gd2VhdGhlciBqc29uIGZvciByZWxldmFudCBkYXRhXG5mdW5jdGlvbiBwcm9jZXNzV2VhdGhlcihqc29uKSB7XG4gIGlmIChqc29uLmNvZCA9PT0gJzQwNCcpIHsgdGhyb3cgbmV3IEVycm9yKCdDaXR5IG5vdCBmb3VuZCcpOyB9XG4gIGNvbnN0IGNpdHkgPSBqc29uLm5hbWU7XG4gIGNvbnN0IHsgY291bnRyeSB9ID0ganNvbi5zeXM7XG4gIGNvbnN0IHsgdGVtcCB9ID0ganNvbi5tYWluO1xuICBjb25zdCB3ZWF0aGVyID0ganNvbi53ZWF0aGVyWzBdLm1haW47XG4gIGNvbnN0IGtleXdvcmQgPSB3ZWF0aGVyO1xuXG4gIHJldHVybiB7XG4gICAgY2l0eSwgY291bnRyeSwgdGVtcCwgd2VhdGhlciwga2V5d29yZCxcbiAgfTtcbn1cblxuLy8gIHNlbmQgb3BlbiB3ZWF0aGVyIGFwaSByZXF1ZXN0XG5hc3luYyBmdW5jdGlvbiByZXF1ZXN0V2VhdGhlcihsb2NhdGlvbiwgdW5pdHMpIHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly9hcGkub3BlbndlYXRoZXJtYXAub3JnL2RhdGEvMi41L3dlYXRoZXI/cT0ke2xvY2F0aW9ufSZ1bml0cz0ke3VuaXRzfSZBUFBJRD0ke2FwaUtleVdlYXRoZXJ9YCwge1xuICAgIG1vZGU6ICdjb3JzJyxcbiAgfSk7XG4gIHJldHVybiByZXNwb25zZS5qc29uKCk7XG59XG5cbi8vICBzZW5kIGEgcmVxdWVzdCB0aGVuIHByb2Nlc3MgdGhlIHJlc3VsdFxuYXN5bmMgZnVuY3Rpb24gZ2V0V2VhdGhlcihsb2NhdGlvbiwgdW5pdHMpIHtcbiAgY29uc3QganNvbiA9IGF3YWl0IHJlcXVlc3RXZWF0aGVyKGxvY2F0aW9uLCB1bml0cyk7XG4gIHJldHVybiBwcm9jZXNzV2VhdGhlcihqc29uKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgeyBnZXRXZWF0aGVyIH07XG4iLCIvLyAgbmV2ZXIgcHVibGlzaCBBUEkga2V5cyBmb3IgcGFpZCBzZXJ2aWNlc1xuY29uc3QgYXBpS2V5SW1hZ2UgPSAnaWVBSW1LTENNcjNNUnlLY3Q0MnM4Qk1WQkVkU2dMMEEnO1xuXG4vLyAgcGFyc2UgZ2lwaHkganNvbiBmb3IgcmVsZXZhbnQgZGF0YVxuZnVuY3Rpb24gcHJvY2Vzc0ltYWdlKGpzb24pIHtcbiAgcmV0dXJuIGpzb24uZGF0YS5pbWFnZXMub3JpZ2luYWwudXJsO1xufVxuXG4vLyAgc2VuZCBnaXBoeSBhcGkgcmVxdWVzdFxuLy8gIHNlbmQgb3BlbiB3ZWF0aGVyIGFwaSByZXF1ZXN0XG5hc3luYyBmdW5jdGlvbiByZXF1ZXN0SW1hZ2UodGVybSkge1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwczovL2FwaS5naXBoeS5jb20vdjEvZ2lmcy90cmFuc2xhdGU/YXBpX2tleT0ke2FwaUtleUltYWdlfSZzPSR7dGVybX1gLCB7XG4gICAgbW9kZTogJ2NvcnMnLFxuICB9KTtcbiAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbn1cblxuLy8gIHNlbmQgYSByZXF1ZXN0IHRoZW4gcHJvY2VzcyB0aGUgcmVzdWx0XG5hc3luYyBmdW5jdGlvbiBnZXRJbWFnZSh0ZXJtKSB7XG4gIGNvbnN0IGpzb24gPSBhd2FpdCByZXF1ZXN0SW1hZ2UodGVybSk7XG4gIHJldHVybiBwcm9jZXNzSW1hZ2UoanNvbik7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHsgZ2V0SW1hZ2UgfTtcbiIsImNvbnN0IENDX1JFR0VYID0gL15bYS16XXsyfSQvaTtcbmNvbnN0IEZMQUdfTEVOR1RIID0gNDtcbmNvbnN0IE9GRlNFVCA9IDEyNzM5NztcbmZ1bmN0aW9uIGNvdW50cnlDb2RlRW1vamkoY2MpIHtcbiAgaWYgKCFDQ19SRUdFWC50ZXN0KGNjKSkge1xuICAgIGNvbnN0IHR5cGUgPSB0eXBlb2YgY2M7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgY2MgYXJndW1lbnQgbXVzdCBiZSBhbiBJU08gMzE2Ni0xIGFscGhhLTIgc3RyaW5nLCBidXQgZ290ICcke3R5cGUgPT09IFwic3RyaW5nXCIgPyBjYyA6IHR5cGV9JyBpbnN0ZWFkLmApO1xuICB9XG4gIGNvbnN0IGNvZGVQb2ludHMgPSBbLi4uY2MudG9VcHBlckNhc2UoKV0ubWFwKChjKSA9PiBjLmNvZGVQb2ludEF0KCkgKyBPRkZTRVQpO1xuICByZXR1cm4gU3RyaW5nLmZyb21Db2RlUG9pbnQoLi4uY29kZVBvaW50cyk7XG59XG5mdW5jdGlvbiBlbW9qaUNvdW50cnlDb2RlKGZsYWcpIHtcbiAgaWYgKGZsYWcubGVuZ3RoICE9PSBGTEFHX0xFTkdUSCkge1xuICAgIGNvbnN0IHR5cGUgPSB0eXBlb2YgZmxhZztcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBmbGFnIGFyZ3VtZW50IG11c3QgYmUgYSBmbGFnIGVtb2ppLCBidXQgZ290ICcke3R5cGUgPT09IFwic3RyaW5nXCIgPyBmbGFnIDogdHlwZX0nIGluc3RlYWQuYCk7XG4gIH1cbiAgY29uc3QgY29kZVBvaW50cyA9IFsuLi5mbGFnXS5tYXAoKGMpID0+IGMuY29kZVBvaW50QXQoKSAtIE9GRlNFVCk7XG4gIHJldHVybiBTdHJpbmcuZnJvbUNvZGVQb2ludCguLi5jb2RlUG9pbnRzKTtcbn1cbnZhciBzcmNfZGVmYXVsdCA9IGNvdW50cnlDb2RlRW1vamk7XG5leHBvcnQge1xuICBjb3VudHJ5Q29kZUVtb2ppLFxuICBzcmNfZGVmYXVsdCBhcyBkZWZhdWx0LFxuICBlbW9qaUNvdW50cnlDb2RlXG59O1xuIiwiaW1wb3J0IGNvdW50cnlDb2RlRW1vamkgZnJvbSAnY291bnRyeS1jb2RlLWVtb2ppJztcblxuZnVuY3Rpb24gc2hvd0hvbWUoZG9tSW5wdXRzLCBkb21PdXRwdXRzLCBjYWxsYmFjaykge1xuICAvLyAgZXJhc2Ugb2xkIGNvbnRlbnRcbiAgZG9tSW5wdXRzLmlubmVyVGV4dCA9ICcnO1xuXG4gIC8vICBmb3JtXG4gIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7XG4gIGRvbUlucHV0cy5hcHBlbmRDaGlsZChmb3JtKTtcbiAgLy8gICAgY2l0eSBpbnB1dFxuICBjb25zdCBjaXR5TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICBmb3JtLmFwcGVuZENoaWxkKGNpdHlMYWJlbCk7XG4gIGNpdHlMYWJlbC5pbm5lclRleHQgPSAnQ2l0eSc7XG4gIGNvbnN0IGNpdHlJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gIGNpdHlMYWJlbC5hcHBlbmRDaGlsZChjaXR5SW5wdXQpO1xuICBjaXR5SW5wdXQuc2V0QXR0cmlidXRlKCduYW1lJywgJ2NpdHknKTtcbiAgY2l0eUlucHV0LnRvZ2dsZUF0dHJpYnV0ZSgncmVxdWlyZWQnKTtcbiAgLy8gICAgdW5pdCBpbnB1dCB3cmFwcGVyXG4gIGNvbnN0IHVuaXRMYWJlbFdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICBmb3JtLmFwcGVuZENoaWxkKHVuaXRMYWJlbFdyYXBwZXIpO1xuICB1bml0TGFiZWxXcmFwcGVyLmlubmVyVGV4dCA9ICdVbml0cyc7XG5cbiAgY29uc3QgY3JlYXRlUmFkaW8gPSAobGFiZWwsIHZhbHVlLCBncm91cCwgY2hlY2tlZCkgPT4ge1xuICAgIGNvbnN0IHVuaXRMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgdW5pdExhYmVsV3JhcHBlci5hcHBlbmRDaGlsZCh1bml0TGFiZWwpO1xuICAgIHVuaXRMYWJlbC5pbm5lclRleHQgPSBsYWJlbDtcbiAgICBjb25zdCB1bml0SW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIHVuaXRMYWJlbC5hcHBlbmRDaGlsZCh1bml0SW5wdXQpO1xuXG4gICAgdW5pdElucHV0LnNldEF0dHJpYnV0ZSgndHlwZScsICdyYWRpbycpO1xuICAgIHVuaXRJbnB1dC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCBncm91cCk7XG4gICAgdW5pdElucHV0LnZhbHVlID0gdmFsdWU7XG4gICAgaWYgKGNoZWNrZWQpIHsgdW5pdElucHV0LnRvZ2dsZUF0dHJpYnV0ZSgnY2hlY2tlZCcpOyB9XG4gICAgcmV0dXJuIFt1bml0TGFiZWwsIHVuaXRJbnB1dF07XG4gIH07XG5cbiAgY29uc3QgW3VuaXRMYWJlbEMsIHVuaXRJbnB1dENdID0gY3JlYXRlUmFkaW8oJ0NlbGNpdXMnLCAnbWV0cmljJywgJ3VuaXRzJywgdHJ1ZSk7XG4gIGNvbnN0IFt1bml0TGFiZWxGLCB1bml0SW5wdXRGXSA9IGNyZWF0ZVJhZGlvKCdGYXJlbmhlaXQnLCAnaW1wZXJpYWwnLCAndW5pdHMnLCBmYWxzZSk7XG5cbiAgLy8gICAgc3VibWl0XG4gIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gIGZvcm0uYXBwZW5kQ2hpbGQoc3VibWl0QnV0dG9uKTtcbiAgc3VibWl0QnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdzdWJtaXQnKTtcbiAgc3VibWl0QnV0dG9uLnZhbHVlID0gJ1N1Ym1pdCc7XG5cbiAgc3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgaWYgKCFjaXR5SW5wdXQudmFsaWRpdHkudmFsaWQpIHJldHVybiBmYWxzZTtcblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgZGF0YSA9IG5ldyBGb3JtRGF0YShmb3JtKTtcbiAgICBjYWxsYmFjayhkYXRhLmdldCgnY2l0eScpLCBkYXRhLmdldCgndW5pdHMnKSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBzaG93TG9hZChkb21JbnB1dHMsIGRvbU91dHB1dHMpIHtcbiAgLy8gIGVyYXNlIG9sZCBjb250ZW50XG4gIGRvbU91dHB1dHMuaW5uZXJUZXh0ID0gJ05vdyBMb2FkaW5nLi4uJztcbn1cblxuZnVuY3Rpb24gc2hvd1Jlc3VsdHMoZG9tSW5wdXRzLCBkb21PdXRwdXRzLCB3ZWF0aGVyLCBzb3VyY2VQcm9taXNlKSB7XG4gIC8vICBlcmFzZSBvbGQgY29udGVudFxuICBkb21PdXRwdXRzLmlubmVyVGV4dCA9ICcnO1xuXG4gIC8vICBkaXNwbGF5IHRoZSB3ZWF0aGVyXG4gIGNvbnN0IGVtb2ppID0gY291bnRyeUNvZGVFbW9qaSh3ZWF0aGVyLmNvdW50cnkpO1xuICBjb25zdCBjaXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRvbU91dHB1dHMuYXBwZW5kQ2hpbGQoY2l0eSk7XG4gIGNpdHkuaW5uZXJUZXh0ID0gYCR7d2VhdGhlci5jaXR5fSAke2Vtb2ppfWA7XG5cbiAgY29uc3QgdGVtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBkb21PdXRwdXRzLmFwcGVuZENoaWxkKHRlbXApO1xuICB0ZW1wLmlubmVyVGV4dCA9IHdlYXRoZXIudGVtcDtcblxuICBjb25zdCBjb25kaXRpb25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRvbU91dHB1dHMuYXBwZW5kQ2hpbGQoY29uZGl0aW9ucyk7XG4gIGNvbmRpdGlvbnMuaW5uZXJUZXh0ID0gd2VhdGhlci53ZWF0aGVyO1xuXG4gIC8vICAgIGRpc3BsYXkgdGhlIGdpcGh5IHJlc3VsdFxuICBzb3VyY2VQcm9taXNlLnRoZW4oKHNvdXJjZSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdpbWFnZSB0byBsb2FkOiAnLCBzb3VyY2UpO1xuICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGRvbU91dHB1dHMuYXBwZW5kQ2hpbGQoaW1nKTtcbiAgICBpbWcuc2V0QXR0cmlidXRlKCdzcmMnLCBzb3VyY2UpO1xuICAgIGltZy5zZXRBdHRyaWJ1dGUoJ2FsdCcsIGBJbWFnZSBvZiAke3dlYXRoZXIud2VhdGhlcn1gKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHNob3dFcnJvcihkb21JbnB1dHMsIGRvbU91dHB1dHMsIHNlYXJjaFRlcm0pIHtcbiAgLy8gIGVyYXNlIG9sZCBjb250ZW50XG4gIGRvbU91dHB1dHMuaW5uZXJUZXh0ID0gJyc7XG5cbiAgY29uc3QgZXJyb3JNZXNzYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRvbU91dHB1dHMuYXBwZW5kQ2hpbGQoZXJyb3JNZXNzYWdlKTtcbiAgZXJyb3JNZXNzYWdlLmlubmVyVGV4dCA9ICdGYWlsZWQgdG8gZmluZCByZXN1bHRzLiBQbGVhc2UgY2hlY2sgeW91ciBpbnB1dHMgYW5kIHRyeSBhZ2Fpbic7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgc2hvd0hvbWUsIHNob3dMb2FkLCBzaG93UmVzdWx0cywgc2hvd0Vycm9yLFxufTtcbiIsImltcG9ydCBvcGVuV2VhdGhlciBmcm9tICcuL3dlYXRoZXInO1xuaW1wb3J0IGdpcGh5IGZyb20gJy4vZ2lwaHknO1xuaW1wb3J0IGRpc3BsYXkgZnJvbSAnLi9kaXNwbGF5JztcblxuY29uc3QgZG9tSW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RvbS1pbnB1dHMnKTtcbmNvbnN0IGRvbU91dHB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZG9tLW91dHB1dHMnKTtcbmNvbnN0IHN1Ym1pdENhbGxiYWNrID0gKGNpdHksIHVuaXRzKSA9PiB7XG4gIGRpc3BsYXkuc2hvd0xvYWQoZG9tSW5wdXRzLCBkb21PdXRwdXRzKTtcbiAgb3BlbldlYXRoZXIuZ2V0V2VhdGhlcihjaXR5LCB1bml0cykudGhlbigod2VhdGhlcikgPT4ge1xuICAgIGNvbnNvbGUubG9nKHdlYXRoZXIpO1xuICAgIGNvbnN0IGltZ1Byb21pc2UgPSBnaXBoeS5nZXRJbWFnZSh3ZWF0aGVyLmtleXdvcmQpO1xuICAgIGRpc3BsYXkuc2hvd1Jlc3VsdHMoZG9tSW5wdXRzLCBkb21PdXRwdXRzLCB3ZWF0aGVyLCBpbWdQcm9taXNlKTtcbiAgfSwgKGVycm9yKSA9PiB7XG4gICAgZGlzcGxheS5zaG93RXJyb3IoZG9tSW5wdXRzLCBkb21PdXRwdXRzKTtcbiAgfSk7XG59O1xuZGlzcGxheS5zaG93SG9tZShkb21JbnB1dHMsIGRvbU91dHB1dHMsIHN1Ym1pdENhbGxiYWNrKTtcbiJdLCJuYW1lcyI6WyJhc3luYyIsImxvY2F0aW9uIiwidW5pdHMiLCJqc29uIiwiZmV0Y2giLCJtb2RlIiwicmVxdWVzdFdlYXRoZXIiLCJjb2QiLCJFcnJvciIsImNpdHkiLCJuYW1lIiwiY291bnRyeSIsInN5cyIsInRlbXAiLCJtYWluIiwid2VhdGhlciIsImtleXdvcmQiLCJwcm9jZXNzV2VhdGhlciIsInRlcm0iLCJyZXF1ZXN0SW1hZ2UiLCJkYXRhIiwiaW1hZ2VzIiwib3JpZ2luYWwiLCJ1cmwiLCJwcm9jZXNzSW1hZ2UiLCJDQ19SRUdFWCIsImRvbUlucHV0cyIsImRvbU91dHB1dHMiLCJjYWxsYmFjayIsImlubmVyVGV4dCIsImZvcm0iLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImNpdHlMYWJlbCIsImNpdHlJbnB1dCIsInNldEF0dHJpYnV0ZSIsInRvZ2dsZUF0dHJpYnV0ZSIsInVuaXRMYWJlbFdyYXBwZXIiLCJjcmVhdGVSYWRpbyIsImxhYmVsIiwidmFsdWUiLCJncm91cCIsImNoZWNrZWQiLCJ1bml0TGFiZWwiLCJ1bml0SW5wdXQiLCJ1bml0TGFiZWxDIiwidW5pdElucHV0QyIsInVuaXRMYWJlbEYiLCJ1bml0SW5wdXRGIiwic3VibWl0QnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsInByZXZlbnREZWZhdWx0IiwiRm9ybURhdGEiLCJnZXQiLCJzb3VyY2VQcm9taXNlIiwiZW1vamkiLCJjYyIsInRlc3QiLCJ0eXBlIiwiVHlwZUVycm9yIiwiY29kZVBvaW50cyIsInRvVXBwZXJDYXNlIiwibWFwIiwiYyIsImNvZGVQb2ludEF0IiwiU3RyaW5nIiwiZnJvbUNvZGVQb2ludCIsImNvbmRpdGlvbnMiLCJ0aGVuIiwic291cmNlIiwiY29uc29sZSIsImxvZyIsImltZyIsInNlYXJjaFRlcm0iLCJlcnJvck1lc3NhZ2UiLCJxdWVyeVNlbGVjdG9yIiwiZGlzcGxheSIsImltZ1Byb21pc2UiLCJnaXBoeSIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==