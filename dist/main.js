(()=>{"use strict";const e=async function(e,t){const n=await async function(e,t){return(await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&units=${t}&APPID=8d838cab2623bf0e4ccf3c4d32eab7bb`,{mode:"cors"})).json()}(e,t);return function(e){if("404"===e.cod)throw new Error("City not found");const t=e.name,{country:n}=e.sys,{temp:i}=e.main,r=e.weather[0].main;return{city:t,country:n,temp:i,weather:r,keyword:r}}(n)},t=async function(e){const t=await async function(e){return(await fetch(`https://api.giphy.com/v1/gifs/translate?api_key=ieAImKLCMr3MRyKct42s8BMVBEdSgL0A&s=${e}`,{mode:"cors"})).json()}(e);return function(e){return e.data.images.original.url}(t)},n=/^[a-z]{2}$/i;const i=function(e,t,n){e.innerText="";const i=document.createElement("form");e.appendChild(i);const r=document.createElement("label");i.appendChild(r),r.innerText="City";const o=document.createElement("input");r.appendChild(o),o.setAttribute("name","city"),o.toggleAttribute("required");const c=document.createElement("label");i.appendChild(c),c.innerText="Units";const a=(e,t,n,i)=>{const r=document.createElement("label");c.appendChild(r),r.innerText=e;const o=document.createElement("input");return r.appendChild(o),o.setAttribute("type","radio"),o.setAttribute("name",n),o.value=t,i&&o.toggleAttribute("checked"),[r,o]},[d,s]=a("Celcius","metric","units",!0),[u,l]=a("Farenheit","imperial","units",!1),m=document.createElement("input");i.appendChild(m),m.setAttribute("type","submit"),m.value="Submit",m.addEventListener("click",(e=>{if(!o.validity.valid)return!1;e.preventDefault();const t=new FormData(i);n(t.get("city"),t.get("units"))}))},r=function(e,t){t.innerText="";const n=document.createElement("div");t.appendChild(n),n.className="error-box",n.innerText="Now Loading..."},o=function(e,t,i,r){t.innerText="";const o=function(e){if(!n.test(e)){const t=typeof e;throw new TypeError(`cc argument must be an ISO 3166-1 alpha-2 string, but got '${"string"===t?e:t}' instead.`)}const t=[...e.toUpperCase()].map((e=>e.codePointAt()+127397));return String.fromCodePoint(...t)}(i.country),c=document.createElement("div");t.appendChild(c),c.innerText=`${i.city} ${o}`;const a=document.createElement("div");t.appendChild(a),a.innerText=i.temp;const d=document.createElement("div");t.appendChild(d),d.innerText=i.weather,r.then((e=>{console.log("image to load: ",e);const n=document.createElement("img");t.appendChild(n),n.setAttribute("src",e),n.setAttribute("alt",`Image of ${i.weather}`)}))},c=function(e,t,n){t.innerText="";const i=document.createElement("div");t.appendChild(i),i.className="error-box",i.innerText="Failed to find results. Please check your inputs and try again"},a=document.querySelector("#dom-inputs"),d=document.querySelector("#dom-outputs");i(a,d,((n,i)=>{r(a,d),e(n,i).then((e=>{console.log(e);const n=t(e.keyword);o(a,d,e,n)}),(e=>{c(a,d)}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBK0JBLFFBTEFBLGVBQTBCQyxFQUFVQyxHQUNsQyxNQUFNQyxRQVRSSCxlQUE4QkMsRUFBVUMsR0FJdEMsYUFIdUJFLE1BQU0scURBQXFESCxXQUFrQkMsMkNBQWdDLENBQ2xJRyxLQUFNLFVBRVFGLE9BS0dHLENBQWVMLEVBQVVDLEdBQzVDLE9BeEJGLFNBQXdCQyxHQUN0QixHQUFpQixRQUFiQSxFQUFLSSxJQUFpQixNQUFNLElBQUlDLE1BQU0sa0JBQzFDLE1BQU1DLEVBQU9OLEVBQUtPLE1BQ1osUUFBRUMsR0FBWVIsRUFBS1MsS0FDbkIsS0FBRUMsR0FBU1YsRUFBS1csS0FDaEJDLEVBQVVaLEVBQUtZLFFBQVEsR0FBR0QsS0FHaEMsTUFBTyxDQUNMTCxLQUFBQSxFQUFNRSxRQUFBQSxFQUFTRSxLQUFBQSxFQUFNRSxRQUFBQSxFQUFTQyxRQUhoQkQsR0FrQlRFLENBQWVkLElDTHhCLEVBTEFILGVBQXdCa0IsR0FDdEIsTUFBTWYsUUFUUkgsZUFBNEJrQixHQUkxQixhQUh1QmQsTUFBTSxzRkFBb0VjLElBQVEsQ0FDdkdiLEtBQU0sVUFFUUYsT0FLR2dCLENBQWFELEdBQ2hDLE9BaEJGLFNBQXNCZixHQUNwQixPQUFPQSxFQUFLaUIsS0FBS0MsT0FBT0MsU0FBU0MsSUFlMUJDLENBQWFyQixJQ3BCaEJzQixFQUFXLGNDc0dqQixRQXBHQSxTQUFrQkMsRUFBV0MsRUFBWUMsR0FFdkNGLEVBQVVHLFVBQVksR0FHdEIsTUFBTUMsRUFBT0MsU0FBU0MsY0FBYyxRQUNwQ04sRUFBVU8sWUFBWUgsR0FFdEIsTUFBTUksRUFBWUgsU0FBU0MsY0FBYyxTQUN6Q0YsRUFBS0csWUFBWUMsR0FDakJBLEVBQVVMLFVBQVksT0FDdEIsTUFBTU0sRUFBWUosU0FBU0MsY0FBYyxTQUN6Q0UsRUFBVUQsWUFBWUUsR0FDdEJBLEVBQVVDLGFBQWEsT0FBUSxRQUMvQkQsRUFBVUUsZ0JBQWdCLFlBRTFCLE1BQU1DLEVBQW1CUCxTQUFTQyxjQUFjLFNBQ2hERixFQUFLRyxZQUFZSyxHQUNqQkEsRUFBaUJULFVBQVksUUFFN0IsTUFBTVUsRUFBYyxDQUFDQyxFQUFPQyxFQUFPQyxFQUFPQyxLQUN4QyxNQUFNQyxFQUFZYixTQUFTQyxjQUFjLFNBQ3pDTSxFQUFpQkwsWUFBWVcsR0FDN0JBLEVBQVVmLFVBQVlXLEVBQ3RCLE1BQU1LLEVBQVlkLFNBQVNDLGNBQWMsU0FPekMsT0FOQVksRUFBVVgsWUFBWVksR0FFdEJBLEVBQVVULGFBQWEsT0FBUSxTQUMvQlMsRUFBVVQsYUFBYSxPQUFRTSxHQUMvQkcsRUFBVUosTUFBUUEsRUFDZEUsR0FBV0UsRUFBVVIsZ0JBQWdCLFdBQ2xDLENBQUNPLEVBQVdDLEtBR2RDLEVBQVlDLEdBQWNSLEVBQVksVUFBVyxTQUFVLFNBQVMsSUFDcEVTLEVBQVlDLEdBQWNWLEVBQVksWUFBYSxXQUFZLFNBQVMsR0FHekVXLEVBQWVuQixTQUFTQyxjQUFjLFNBQzVDRixFQUFLRyxZQUFZaUIsR0FDakJBLEVBQWFkLGFBQWEsT0FBUSxVQUNsQ2MsRUFBYVQsTUFBUSxTQUVyQlMsRUFBYUMsaUJBQWlCLFNBQVVDLElBQ3RDLElBQUtqQixFQUFVa0IsU0FBU0MsTUFBTyxPQUFPLEVBRXRDRixFQUFNRyxpQkFDTixNQUFNbkMsRUFBTyxJQUFJb0MsU0FBUzFCLEdBQzFCRixFQUFTUixFQUFLcUMsSUFBSSxRQUFTckMsRUFBS3FDLElBQUksY0FvRHhDLEVBaERBLFNBQWtCL0IsRUFBV0MsR0FFM0JBLEVBQVdFLFVBQVksR0FFdkIsTUFBTTZCLEVBQWlCM0IsU0FBU0MsY0FBYyxPQUM5Q0wsRUFBV00sWUFBWXlCLEdBQ3ZCQSxFQUFlQyxVQUFZLFlBQzNCRCxFQUFlN0IsVUFBWSxrQkF5QzdCLEVBdENBLFNBQXFCSCxFQUFXQyxFQUFZWixFQUFTNkMsR0FFbkRqQyxFQUFXRSxVQUFZLEdBR3ZCLE1BQU1nQyxFRGxFUixTQUEwQkMsR0FDeEIsSUFBS3JDLEVBQVNzQyxLQUFLRCxHQUFLLENBQ3RCLE1BQU1FLFNBQWNGLEVBQ3BCLE1BQU0sSUFBSUcsVUFBVSw4REFBdUUsV0FBVEQsRUFBb0JGLEVBQUtFLGVBRTdHLE1BQU1FLEVBQWEsSUFBSUosRUFBR0ssZUFBZUMsS0FBS0MsR0FBTUEsRUFBRUMsY0FOekMsU0FPYixPQUFPQyxPQUFPQyxpQkFBaUJOLEdDNERqQixDQUFpQm5ELEVBQVFKLFNBQ2pDRixFQUFPc0IsU0FBU0MsY0FBYyxPQUNwQ0wsRUFBV00sWUFBWXhCLEdBQ3ZCQSxFQUFLb0IsVUFBWSxHQUFHZCxFQUFRTixRQUFRb0QsSUFFcEMsTUFBTWhELEVBQU9rQixTQUFTQyxjQUFjLE9BQ3BDTCxFQUFXTSxZQUFZcEIsR0FDdkJBLEVBQUtnQixVQUFZZCxFQUFRRixLQUV6QixNQUFNNEQsRUFBYTFDLFNBQVNDLGNBQWMsT0FDMUNMLEVBQVdNLFlBQVl3QyxHQUN2QkEsRUFBVzVDLFVBQVlkLEVBQVFBLFFBRy9CNkMsRUFBY2MsTUFBTUMsSUFDbEJDLFFBQVFDLElBQUksa0JBQW1CRixHQUMvQixNQUFNRyxFQUFNL0MsU0FBU0MsY0FBYyxPQUNuQ0wsRUFBV00sWUFBWTZDLEdBQ3ZCQSxFQUFJMUMsYUFBYSxNQUFPdUMsR0FDeEJHLEVBQUkxQyxhQUFhLE1BQU8sWUFBWXJCLEVBQVFBLGVBY2hELEVBVkEsU0FBbUJXLEVBQVdDLEVBQVlvRCxHQUV4Q3BELEVBQVdFLFVBQVksR0FFdkIsTUFBTW1ELEVBQWVqRCxTQUFTQyxjQUFjLE9BQzVDTCxFQUFXTSxZQUFZK0MsR0FDdkJBLEVBQWFyQixVQUFZLFlBQ3pCcUIsRUFBYW5ELFVBQVksa0VDL0ZyQkgsRUFBWUssU0FBU2tELGNBQWMsZUFDbkN0RCxFQUFhSSxTQUFTa0QsY0FBYyxnQkFXMUNDLEVBQWlCeEQsRUFBV0MsR0FWTCxDQUFDbEIsRUFBTVAsS0FDNUJnRixFQUFpQnhELEVBQVdDLEdBQzVCLEVBQXVCbEIsRUFBTVAsR0FBT3dFLE1BQU0zRCxJQUN4QzZELFFBQVFDLElBQUk5RCxHQUNaLE1BQU1vRSxFQUFhQyxFQUFlckUsRUFBUUMsU0FDMUNrRSxFQUFvQnhELEVBQVdDLEVBQVlaLEVBQVNvRSxNQUNsREUsSUFDRkgsRUFBa0J4RCxFQUFXQyxVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2VhdGhlci1mZXRjaC8uL3NyYy93ZWF0aGVyLmpzIiwid2VicGFjazovL3dlYXRoZXItZmV0Y2gvLi9zcmMvZ2lwaHkuanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1mZXRjaC8uL25vZGVfbW9kdWxlcy9jb3VudHJ5LWNvZGUtZW1vamkvbGliL2luZGV4Lm1qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWZldGNoLy4vc3JjL2Rpc3BsYXkuanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1mZXRjaC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAgbmV2ZXIgcHVibGlzaCBBUEkga2V5cyBmb3IgcGFpZCBzZXJ2aWNlc1xuY29uc3QgYXBpS2V5V2VhdGhlciA9ICc4ZDgzOGNhYjI2MjNiZjBlNGNjZjNjNGQzMmVhYjdiYic7XG5cbi8vICBwYXJzZSBvcGVuIHdlYXRoZXIganNvbiBmb3IgcmVsZXZhbnQgZGF0YVxuZnVuY3Rpb24gcHJvY2Vzc1dlYXRoZXIoanNvbikge1xuICBpZiAoanNvbi5jb2QgPT09ICc0MDQnKSB7IHRocm93IG5ldyBFcnJvcignQ2l0eSBub3QgZm91bmQnKTsgfVxuICBjb25zdCBjaXR5ID0ganNvbi5uYW1lO1xuICBjb25zdCB7IGNvdW50cnkgfSA9IGpzb24uc3lzO1xuICBjb25zdCB7IHRlbXAgfSA9IGpzb24ubWFpbjtcbiAgY29uc3Qgd2VhdGhlciA9IGpzb24ud2VhdGhlclswXS5tYWluO1xuICBjb25zdCBrZXl3b3JkID0gd2VhdGhlcjtcblxuICByZXR1cm4ge1xuICAgIGNpdHksIGNvdW50cnksIHRlbXAsIHdlYXRoZXIsIGtleXdvcmQsXG4gIH07XG59XG5cbi8vICBzZW5kIG9wZW4gd2VhdGhlciBhcGkgcmVxdWVzdFxuYXN5bmMgZnVuY3Rpb24gcmVxdWVzdFdlYXRoZXIobG9jYXRpb24sIHVuaXRzKSB7XG4gIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS93ZWF0aGVyP3E9JHtsb2NhdGlvbn0mdW5pdHM9JHt1bml0c30mQVBQSUQ9JHthcGlLZXlXZWF0aGVyfWAsIHtcbiAgICBtb2RlOiAnY29ycycsXG4gIH0pO1xuICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xufVxuXG4vLyAgc2VuZCBhIHJlcXVlc3QgdGhlbiBwcm9jZXNzIHRoZSByZXN1bHRcbmFzeW5jIGZ1bmN0aW9uIGdldFdlYXRoZXIobG9jYXRpb24sIHVuaXRzKSB7XG4gIGNvbnN0IGpzb24gPSBhd2FpdCByZXF1ZXN0V2VhdGhlcihsb2NhdGlvbiwgdW5pdHMpO1xuICByZXR1cm4gcHJvY2Vzc1dlYXRoZXIoanNvbik7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHsgZ2V0V2VhdGhlciB9O1xuIiwiLy8gIG5ldmVyIHB1Ymxpc2ggQVBJIGtleXMgZm9yIHBhaWQgc2VydmljZXNcbmNvbnN0IGFwaUtleUltYWdlID0gJ2llQUltS0xDTXIzTVJ5S2N0NDJzOEJNVkJFZFNnTDBBJztcblxuLy8gIHBhcnNlIGdpcGh5IGpzb24gZm9yIHJlbGV2YW50IGRhdGFcbmZ1bmN0aW9uIHByb2Nlc3NJbWFnZShqc29uKSB7XG4gIHJldHVybiBqc29uLmRhdGEuaW1hZ2VzLm9yaWdpbmFsLnVybDtcbn1cblxuLy8gIHNlbmQgZ2lwaHkgYXBpIHJlcXVlc3Rcbi8vICBzZW5kIG9wZW4gd2VhdGhlciBhcGkgcmVxdWVzdFxuYXN5bmMgZnVuY3Rpb24gcmVxdWVzdEltYWdlKHRlcm0pIHtcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly9hcGkuZ2lwaHkuY29tL3YxL2dpZnMvdHJhbnNsYXRlP2FwaV9rZXk9JHthcGlLZXlJbWFnZX0mcz0ke3Rlcm19YCwge1xuICAgIG1vZGU6ICdjb3JzJyxcbiAgfSk7XG4gIHJldHVybiByZXNwb25zZS5qc29uKCk7XG59XG5cbi8vICBzZW5kIGEgcmVxdWVzdCB0aGVuIHByb2Nlc3MgdGhlIHJlc3VsdFxuYXN5bmMgZnVuY3Rpb24gZ2V0SW1hZ2UodGVybSkge1xuICBjb25zdCBqc29uID0gYXdhaXQgcmVxdWVzdEltYWdlKHRlcm0pO1xuICByZXR1cm4gcHJvY2Vzc0ltYWdlKGpzb24pO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7IGdldEltYWdlIH07XG4iLCJjb25zdCBDQ19SRUdFWCA9IC9eW2Etel17Mn0kL2k7XG5jb25zdCBGTEFHX0xFTkdUSCA9IDQ7XG5jb25zdCBPRkZTRVQgPSAxMjczOTc7XG5mdW5jdGlvbiBjb3VudHJ5Q29kZUVtb2ppKGNjKSB7XG4gIGlmICghQ0NfUkVHRVgudGVzdChjYykpIHtcbiAgICBjb25zdCB0eXBlID0gdHlwZW9mIGNjO1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYGNjIGFyZ3VtZW50IG11c3QgYmUgYW4gSVNPIDMxNjYtMSBhbHBoYS0yIHN0cmluZywgYnV0IGdvdCAnJHt0eXBlID09PSBcInN0cmluZ1wiID8gY2MgOiB0eXBlfScgaW5zdGVhZC5gKTtcbiAgfVxuICBjb25zdCBjb2RlUG9pbnRzID0gWy4uLmNjLnRvVXBwZXJDYXNlKCldLm1hcCgoYykgPT4gYy5jb2RlUG9pbnRBdCgpICsgT0ZGU0VUKTtcbiAgcmV0dXJuIFN0cmluZy5mcm9tQ29kZVBvaW50KC4uLmNvZGVQb2ludHMpO1xufVxuZnVuY3Rpb24gZW1vamlDb3VudHJ5Q29kZShmbGFnKSB7XG4gIGlmIChmbGFnLmxlbmd0aCAhPT0gRkxBR19MRU5HVEgpIHtcbiAgICBjb25zdCB0eXBlID0gdHlwZW9mIGZsYWc7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgZmxhZyBhcmd1bWVudCBtdXN0IGJlIGEgZmxhZyBlbW9qaSwgYnV0IGdvdCAnJHt0eXBlID09PSBcInN0cmluZ1wiID8gZmxhZyA6IHR5cGV9JyBpbnN0ZWFkLmApO1xuICB9XG4gIGNvbnN0IGNvZGVQb2ludHMgPSBbLi4uZmxhZ10ubWFwKChjKSA9PiBjLmNvZGVQb2ludEF0KCkgLSBPRkZTRVQpO1xuICByZXR1cm4gU3RyaW5nLmZyb21Db2RlUG9pbnQoLi4uY29kZVBvaW50cyk7XG59XG52YXIgc3JjX2RlZmF1bHQgPSBjb3VudHJ5Q29kZUVtb2ppO1xuZXhwb3J0IHtcbiAgY291bnRyeUNvZGVFbW9qaSxcbiAgc3JjX2RlZmF1bHQgYXMgZGVmYXVsdCxcbiAgZW1vamlDb3VudHJ5Q29kZVxufTtcbiIsImltcG9ydCBjb3VudHJ5Q29kZUVtb2ppIGZyb20gJ2NvdW50cnktY29kZS1lbW9qaSc7XG5cbmZ1bmN0aW9uIHNob3dIb21lKGRvbUlucHV0cywgZG9tT3V0cHV0cywgY2FsbGJhY2spIHtcbiAgLy8gIGVyYXNlIG9sZCBjb250ZW50XG4gIGRvbUlucHV0cy5pbm5lclRleHQgPSAnJztcblxuICAvLyAgZm9ybVxuICBjb25zdCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpO1xuICBkb21JbnB1dHMuYXBwZW5kQ2hpbGQoZm9ybSk7XG4gIC8vICAgIGNpdHkgaW5wdXRcbiAgY29uc3QgY2l0eUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgZm9ybS5hcHBlbmRDaGlsZChjaXR5TGFiZWwpO1xuICBjaXR5TGFiZWwuaW5uZXJUZXh0ID0gJ0NpdHknO1xuICBjb25zdCBjaXR5SW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICBjaXR5TGFiZWwuYXBwZW5kQ2hpbGQoY2l0eUlucHV0KTtcbiAgY2l0eUlucHV0LnNldEF0dHJpYnV0ZSgnbmFtZScsICdjaXR5Jyk7XG4gIGNpdHlJbnB1dC50b2dnbGVBdHRyaWJ1dGUoJ3JlcXVpcmVkJyk7XG4gIC8vICAgIHVuaXQgaW5wdXQgd3JhcHBlclxuICBjb25zdCB1bml0TGFiZWxXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgZm9ybS5hcHBlbmRDaGlsZCh1bml0TGFiZWxXcmFwcGVyKTtcbiAgdW5pdExhYmVsV3JhcHBlci5pbm5lclRleHQgPSAnVW5pdHMnO1xuXG4gIGNvbnN0IGNyZWF0ZVJhZGlvID0gKGxhYmVsLCB2YWx1ZSwgZ3JvdXAsIGNoZWNrZWQpID0+IHtcbiAgICBjb25zdCB1bml0TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgIHVuaXRMYWJlbFdyYXBwZXIuYXBwZW5kQ2hpbGQodW5pdExhYmVsKTtcbiAgICB1bml0TGFiZWwuaW5uZXJUZXh0ID0gbGFiZWw7XG4gICAgY29uc3QgdW5pdElucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICB1bml0TGFiZWwuYXBwZW5kQ2hpbGQodW5pdElucHV0KTtcblxuICAgIHVuaXRJbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAncmFkaW8nKTtcbiAgICB1bml0SW5wdXQuc2V0QXR0cmlidXRlKCduYW1lJywgZ3JvdXApO1xuICAgIHVuaXRJbnB1dC52YWx1ZSA9IHZhbHVlO1xuICAgIGlmIChjaGVja2VkKSB7IHVuaXRJbnB1dC50b2dnbGVBdHRyaWJ1dGUoJ2NoZWNrZWQnKTsgfVxuICAgIHJldHVybiBbdW5pdExhYmVsLCB1bml0SW5wdXRdO1xuICB9O1xuXG4gIGNvbnN0IFt1bml0TGFiZWxDLCB1bml0SW5wdXRDXSA9IGNyZWF0ZVJhZGlvKCdDZWxjaXVzJywgJ21ldHJpYycsICd1bml0cycsIHRydWUpO1xuICBjb25zdCBbdW5pdExhYmVsRiwgdW5pdElucHV0Rl0gPSBjcmVhdGVSYWRpbygnRmFyZW5oZWl0JywgJ2ltcGVyaWFsJywgJ3VuaXRzJywgZmFsc2UpO1xuXG4gIC8vICAgIHN1Ym1pdFxuICBjb25zdCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICBmb3JtLmFwcGVuZENoaWxkKHN1Ym1pdEJ1dHRvbik7XG4gIHN1Ym1pdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnc3VibWl0Jyk7XG4gIHN1Ym1pdEJ1dHRvbi52YWx1ZSA9ICdTdWJtaXQnO1xuXG4gIHN1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgIGlmICghY2l0eUlucHV0LnZhbGlkaXR5LnZhbGlkKSByZXR1cm4gZmFsc2U7XG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGRhdGEgPSBuZXcgRm9ybURhdGEoZm9ybSk7XG4gICAgY2FsbGJhY2soZGF0YS5nZXQoJ2NpdHknKSwgZGF0YS5nZXQoJ3VuaXRzJykpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gc2hvd0xvYWQoZG9tSW5wdXRzLCBkb21PdXRwdXRzKSB7XG4gIC8vICBlcmFzZSBvbGQgY29udGVudFxuICBkb21PdXRwdXRzLmlubmVyVGV4dCA9ICcnO1xuXG4gIGNvbnN0IGxvYWRpbmdNZXNzYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRvbU91dHB1dHMuYXBwZW5kQ2hpbGQobG9hZGluZ01lc3NhZ2UpO1xuICBsb2FkaW5nTWVzc2FnZS5jbGFzc05hbWUgPSAnZXJyb3ItYm94JztcbiAgbG9hZGluZ01lc3NhZ2UuaW5uZXJUZXh0ID0gJ05vdyBMb2FkaW5nLi4uJztcbn1cblxuZnVuY3Rpb24gc2hvd1Jlc3VsdHMoZG9tSW5wdXRzLCBkb21PdXRwdXRzLCB3ZWF0aGVyLCBzb3VyY2VQcm9taXNlKSB7XG4gIC8vICBlcmFzZSBvbGQgY29udGVudFxuICBkb21PdXRwdXRzLmlubmVyVGV4dCA9ICcnO1xuXG4gIC8vICBkaXNwbGF5IHRoZSB3ZWF0aGVyXG4gIGNvbnN0IGVtb2ppID0gY291bnRyeUNvZGVFbW9qaSh3ZWF0aGVyLmNvdW50cnkpO1xuICBjb25zdCBjaXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRvbU91dHB1dHMuYXBwZW5kQ2hpbGQoY2l0eSk7XG4gIGNpdHkuaW5uZXJUZXh0ID0gYCR7d2VhdGhlci5jaXR5fSAke2Vtb2ppfWA7XG5cbiAgY29uc3QgdGVtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBkb21PdXRwdXRzLmFwcGVuZENoaWxkKHRlbXApO1xuICB0ZW1wLmlubmVyVGV4dCA9IHdlYXRoZXIudGVtcDtcblxuICBjb25zdCBjb25kaXRpb25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRvbU91dHB1dHMuYXBwZW5kQ2hpbGQoY29uZGl0aW9ucyk7XG4gIGNvbmRpdGlvbnMuaW5uZXJUZXh0ID0gd2VhdGhlci53ZWF0aGVyO1xuXG4gIC8vICAgIGRpc3BsYXkgdGhlIGdpcGh5IHJlc3VsdFxuICBzb3VyY2VQcm9taXNlLnRoZW4oKHNvdXJjZSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdpbWFnZSB0byBsb2FkOiAnLCBzb3VyY2UpO1xuICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGRvbU91dHB1dHMuYXBwZW5kQ2hpbGQoaW1nKTtcbiAgICBpbWcuc2V0QXR0cmlidXRlKCdzcmMnLCBzb3VyY2UpO1xuICAgIGltZy5zZXRBdHRyaWJ1dGUoJ2FsdCcsIGBJbWFnZSBvZiAke3dlYXRoZXIud2VhdGhlcn1gKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHNob3dFcnJvcihkb21JbnB1dHMsIGRvbU91dHB1dHMsIHNlYXJjaFRlcm0pIHtcbiAgLy8gIGVyYXNlIG9sZCBjb250ZW50XG4gIGRvbU91dHB1dHMuaW5uZXJUZXh0ID0gJyc7XG5cbiAgY29uc3QgZXJyb3JNZXNzYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRvbU91dHB1dHMuYXBwZW5kQ2hpbGQoZXJyb3JNZXNzYWdlKTtcbiAgZXJyb3JNZXNzYWdlLmNsYXNzTmFtZSA9ICdlcnJvci1ib3gnO1xuICBlcnJvck1lc3NhZ2UuaW5uZXJUZXh0ID0gJ0ZhaWxlZCB0byBmaW5kIHJlc3VsdHMuIFBsZWFzZSBjaGVjayB5b3VyIGlucHV0cyBhbmQgdHJ5IGFnYWluJztcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBzaG93SG9tZSwgc2hvd0xvYWQsIHNob3dSZXN1bHRzLCBzaG93RXJyb3IsXG59O1xuIiwiaW1wb3J0IG9wZW5XZWF0aGVyIGZyb20gJy4vd2VhdGhlcic7XG5pbXBvcnQgZ2lwaHkgZnJvbSAnLi9naXBoeSc7XG5pbXBvcnQgZGlzcGxheSBmcm9tICcuL2Rpc3BsYXknO1xuXG5jb25zdCBkb21JbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZG9tLWlucHV0cycpO1xuY29uc3QgZG9tT3V0cHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkb20tb3V0cHV0cycpO1xuY29uc3Qgc3VibWl0Q2FsbGJhY2sgPSAoY2l0eSwgdW5pdHMpID0+IHtcbiAgZGlzcGxheS5zaG93TG9hZChkb21JbnB1dHMsIGRvbU91dHB1dHMpO1xuICBvcGVuV2VhdGhlci5nZXRXZWF0aGVyKGNpdHksIHVuaXRzKS50aGVuKCh3ZWF0aGVyKSA9PiB7XG4gICAgY29uc29sZS5sb2cod2VhdGhlcik7XG4gICAgY29uc3QgaW1nUHJvbWlzZSA9IGdpcGh5LmdldEltYWdlKHdlYXRoZXIua2V5d29yZCk7XG4gICAgZGlzcGxheS5zaG93UmVzdWx0cyhkb21JbnB1dHMsIGRvbU91dHB1dHMsIHdlYXRoZXIsIGltZ1Byb21pc2UpO1xuICB9LCAoZXJyb3IpID0+IHtcbiAgICBkaXNwbGF5LnNob3dFcnJvcihkb21JbnB1dHMsIGRvbU91dHB1dHMpO1xuICB9KTtcbn07XG5kaXNwbGF5LnNob3dIb21lKGRvbUlucHV0cywgZG9tT3V0cHV0cywgc3VibWl0Q2FsbGJhY2spO1xuIl0sIm5hbWVzIjpbImFzeW5jIiwibG9jYXRpb24iLCJ1bml0cyIsImpzb24iLCJmZXRjaCIsIm1vZGUiLCJyZXF1ZXN0V2VhdGhlciIsImNvZCIsIkVycm9yIiwiY2l0eSIsIm5hbWUiLCJjb3VudHJ5Iiwic3lzIiwidGVtcCIsIm1haW4iLCJ3ZWF0aGVyIiwia2V5d29yZCIsInByb2Nlc3NXZWF0aGVyIiwidGVybSIsInJlcXVlc3RJbWFnZSIsImRhdGEiLCJpbWFnZXMiLCJvcmlnaW5hbCIsInVybCIsInByb2Nlc3NJbWFnZSIsIkNDX1JFR0VYIiwiZG9tSW5wdXRzIiwiZG9tT3V0cHV0cyIsImNhbGxiYWNrIiwiaW5uZXJUZXh0IiwiZm9ybSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwiY2l0eUxhYmVsIiwiY2l0eUlucHV0Iiwic2V0QXR0cmlidXRlIiwidG9nZ2xlQXR0cmlidXRlIiwidW5pdExhYmVsV3JhcHBlciIsImNyZWF0ZVJhZGlvIiwibGFiZWwiLCJ2YWx1ZSIsImdyb3VwIiwiY2hlY2tlZCIsInVuaXRMYWJlbCIsInVuaXRJbnB1dCIsInVuaXRMYWJlbEMiLCJ1bml0SW5wdXRDIiwidW5pdExhYmVsRiIsInVuaXRJbnB1dEYiLCJzdWJtaXRCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwicHJldmVudERlZmF1bHQiLCJGb3JtRGF0YSIsImdldCIsImxvYWRpbmdNZXNzYWdlIiwiY2xhc3NOYW1lIiwic291cmNlUHJvbWlzZSIsImVtb2ppIiwiY2MiLCJ0ZXN0IiwidHlwZSIsIlR5cGVFcnJvciIsImNvZGVQb2ludHMiLCJ0b1VwcGVyQ2FzZSIsIm1hcCIsImMiLCJjb2RlUG9pbnRBdCIsIlN0cmluZyIsImZyb21Db2RlUG9pbnQiLCJjb25kaXRpb25zIiwidGhlbiIsInNvdXJjZSIsImNvbnNvbGUiLCJsb2ciLCJpbWciLCJzZWFyY2hUZXJtIiwiZXJyb3JNZXNzYWdlIiwicXVlcnlTZWxlY3RvciIsImRpc3BsYXkiLCJpbWdQcm9taXNlIiwiZ2lwaHkiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=